{% extends "layout.html" %}
{% block title %}Homepage{% endblock %}
{% block header %}
{% endblock %}
{% block nav %}
    {{ super() }}
    {% block nav_extension %}
        You're free to
        <form class="fixed-sorter" action="{{ url_for('questions_list', sort_by=sort_by) }}", method="post">
            <select name="sort_by" id="sort_by">
                {% set sort_criteria = ["submission_time", "view_number", "vote_number", "title", "message"] %}
                {% for sort_by_option in sort_criteria %}
                    {% set sort_order = ["asc", "desc"] %}
                        {% for order in sort_order %}
                            <option value="{{ sort_by_option }}-{{ order }}">sort by: {{ sort_by_option }} {% if order=='asc'%} &#8595 {% else %} &#8593{% endif %}</option>
                        {% endfor %}
                {% endfor %}
            </select>
            <button type="submit">Sort</button>
        </form>
        or you can
        <a href="{{ url_for("add_question") }}" class="fixed-button">Ask new question</a>
        our users.
    {% endblock %}

{% endblock %}
{% block body %}
    <h1>Questions List</h1>
    <table class = content-table>
        {%  set headers = ["submission_time", "view_number", "vote_number", "title", "message", "vote_up", "vote_down"] %}
        <thead>
        <tr>{% for table_header in headers %}
            <th>{{ table_header.capitalize().replace("_", " ") }}</th>
            {% endfor %}
        </tr>
        </thead>
        <tbody>
            {% for question in all_questions %}
                <tr>{% for data_header, question_detail in question.items() %}
                    {% if data_header in headers %}
                    <td>
                        {% if data_header == "title" %}
                            <a href="{{ url_for("show_question", question_id=question.get("id")) }}">{{ question_detail }}</a>
                        {% else %}
                            {{ question_detail }}
                        {% endif %}
                    </td>
                    {% endif %}
                {% endfor %}
                    <td>
                        <a href="{{ url_for("question_vote_up", question_id=question.get("id")) }}" methods="POST">
                            <img src="{{ url_for('static', filename="icons/like_up.png") }}" width="100px" height="100px" alt="vote_up">
                        </a>
                    </td>
                    <td>
                        <a href="{{ url_for("question_vote_down", question_id=question.get("id")) }}" methods="POST">
                            <img src="{{ url_for('static', filename="icons/like_down.png") }}" width="100px" height="100px" alt="vote_down">
                        </a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
